[{"text": "Owning a decent function", "start": 0.86, "duration": 1.94}, {"text": "Waveform generator is sometimes pretty much mandatory or for an electronics tinkerer", "start": 2.8, "duration": 4.59}, {"text": "to for example evaluate filter circuits or stress test a small MOSFET circuit", "start": 7.79, "duration": 5.63}, {"text": "the one I've been using is the Siglent SDG2082X", "start": 14.51, "duration": 4.549}, {"text": "Which works like a charm and offers tons of awesome additional features", "start": 19.43, "duration": 4.369}, {"text": "The only problem is that electronics beginners probably do not want to spend 600 euro on such a piece of equipment", "start": 24.89, "duration": 7.1}, {"text": "Thankfully though, cheaper function generators do exist like this AE20125", "start": 33.26, "duration": 6.049}, {"text": "which you can get for around 70 euro and", "start": 39.71, "duration": 3.02}, {"text": "While this generator does create sine square and triangle waves up to a frequency of partly 10 megahertz", "start": 43.55, "duration": 6.529}, {"text": "I'm not satisfied with its maximum output level between - and +5 volts", "start": 50.45, "duration": 5.359}, {"text": "So in this episode of DIY or Buy, let's see whether we can make our own decent function/", "start": 56.809, "duration": 5.96}, {"text": "waveform generator or whether we should stick to the buy version instead", "start": 63.28, "duration": 4.29}, {"text": "Let's get started... [Lookalike by Bartlebeats playing]", "start": 68.63, "duration": 2.0}, {"text": "This video is sponsored by JLCPCB(.com), which is slowly becoming a worldwide known PCB brand", "start": 82.28, "duration": 6.739}, {"text": "$2 PCB's, continuous good quality and fast turnarounds is what they are known for", "start": 89.93, "duration": 5.449}, {"text": "So upload your gerber files today and test their service", "start": 95.9, "duration": 3.559}, {"text": "First off, I had to define what features my DIY function generator should come with", "start": 101.52, "duration": 5.0}, {"text": "Obviously, it should be able to provide a sine, triangle and square voltage", "start": 107.82, "duration": 4.099}, {"text": "With a frequency of up to ten megahertz and a peak to peak voltage from minus to plus 12 volts (peak-to-peak)", "start": 112.53, "duration": 6.23}, {"text": "The amplitude of the voltage also needs to be adjustable as well as the offset for this voltage", "start": 119.64, "duration": 6.139}, {"text": "Which means it should be able to provide an AC voltage as well as a positive or negative DC voltage. I", "start": 126.3, "duration": 7.069}, {"text": "think those features are decent base for good function generator", "start": 134.19, "duration": 3.679}, {"text": "So let's think about creating the different waveforms", "start": 138.54, "duration": 2.75}, {"text": "Which brings us to the problem whether we should go with the analog or digital route", "start": 141.93, "duration": 5.15}, {"text": "If we would go analog then a simple op-amp configuration like this can be found everywhere on the Internet", "start": 147.78, "duration": 6.589}, {"text": "After building the circuit up on a breadboard and powering it, we can use an oscilloscope to probe each op-amp stage", "start": 155.43, "duration": 7.25}, {"text": "To find out that the first one creates a supposedly square wave", "start": 163.02, "duration": 4.069}, {"text": "the second one a triangle wave and the third one a sine wave and", "start": 167.61, "duration": 4.46}, {"text": "By adjusting the potentiometer at the first stage. We can also adjust the frequency of the waveforms", "start": 172.89, "duration": 6.589}, {"text": "The way this works is that an op-amp outputs will do anything in", "start": 180.42, "duration": 4.25}, {"text": "Order to keep the difference voltage between its inputs to zero volts", "start": 184.799, "duration": 3.92}, {"text": "Thus at the first stage, We got a multi-vibrator", "start": 189.69, "duration": 2.809}, {"text": "Which means the op-amp outputs will alternate between its high and low states to charge/", "start": 192.66, "duration": 5.929}, {"text": "Discharge the capacitor so that it reaches the same voltage level as on the non-inverting inputs", "start": 199.2, "duration": 5.9}, {"text": "Created by the voltage divider. At the second and third stage", "start": 205.47, "duration": 4.459}, {"text": "We got a classical integrator op-amp circuits whose output will fall negatively", "start": 209.94, "duration": 5.539}, {"text": "If a positive constant voltage is applied and rise positively if a negative constant voltage is applied", "start": 215.48, "duration": 6.479}, {"text": "It does that to, like always, keep the inverting input at the same defined voltage level as the non-inverting inputs.", "start": 222.9, "duration": 0.5}, {"text": "In theory, those op-amp circuits sound promising", "start": 223.4, "duration": 10.3}, {"text": "But practically they do not deliver decent waveforms and also come with a minimum frequency", "start": 234.65, "duration": 5.25}, {"text": "Which means we would have to change passive components on the fly to alter the frequency range.", "start": 240.9, "duration": 5.99}, {"text": "That is a hassle though?", "start": 247.59, "duration": 1.17}, {"text": "Which is why I would only recommend such op-amp circuits if you're looking for one specific waveform that you do not want to change", "start": 248.76, "duration": 7.26}, {"text": "But if you desperately want to stay analog,", "start": 256.92, "duration": 2.68}, {"text": "then you can always get yourself an xr2206 function generator IC", "start": 259.68, "duration": 4.76}, {"text": "it provides a square wave and triangle slash sign outputs with a frequency of up to one megahertz and", "start": 264.92, "duration": 7.1}, {"text": "only requires a few complementary passive components and", "start": 272.46, "duration": 3.679}, {"text": "If you want to be lazy like me", "start": 276.72, "duration": 1.74}, {"text": "you can even get a complete kit based around them for only six euro and", "start": 278.46, "duration": 4.429}, {"text": "Let me tell you that it works really well for its price", "start": 283.289, "duration": 3.38}, {"text": "But we are still not even close to the features. I said at the beginning of the video", "start": 287.699, "duration": 4.37}, {"text": "So let's turn to digital and let's talk about DDS-which stands for direct digital synthesis", "start": 292.83, "duration": 7.339}, {"text": "To explain it better though. I firstly searched for DDS IC and found this", "start": 301.11, "duration": 7.04}, {"text": "AD8933 Programmable waveform generator IC", "start": 308.669, "duration": 2.0}, {"text": "It's functional block diagram might seem confusing at first", "start": 311.49, "duration": 3.38}, {"text": "But after studying the 21 pages of the data sheets, it is pretty clear how this DDS IC works", "start": 315.36, "duration": 6.92}, {"text": "First off. We got the phase accumulator, which super simplified", "start": 323.31, "duration": 4.13}, {"text": "stores all the possible voltage values of a sine wave as phase information between 0 & 2 PI", "start": 327.87, "duration": 5.959}, {"text": "next the SIN ROM turns the phase information into actual mathematical voltage amplitudes and", "start": 335.28, "duration": 6.169}, {"text": "Finally, we got a digital to analog converter", "start": 342.479, "duration": 2.48}, {"text": "Which then spits out our beautiful sine wave", "start": 345.599, "duration": 2.6}, {"text": "So in a nutshell, it is a more or less glorified memory with attached DAC", "start": 349.05, "duration": 5.179}, {"text": "to generate whatever waveform is stored in the memory", "start": 354.78, "duration": 3.829}, {"text": "and speaking of waveforms, by writing to the control frequency and phase registers", "start": 359.61, "duration": 5.0}, {"text": "We cannot only achieve a frequency of up to 12.5 megahertz", "start": 364.89, "duration": 4.139}, {"text": "But also a triangle and square wave and", "start": 369.54, "duration": 3.66}, {"text": "Since adjusting the output voltage between plus minus 12 volts and adding an offset should be easy to do with an op-amp circuit", "start": 373.24, "duration": 7.36}, {"text": "I started designing my DIY function generator around this AD8933 IC", "start": 380.61, "duration": 6.36}, {"text": "But while I was getting close to finishing my circuit schematic", "start": 388.0, "duration": 3.709}, {"text": "I noticed that someone else already created a very similar project", "start": 391.71, "duration": 4.92}, {"text": "Caesar Chirilla over at Allaboutcircuits actually created such a project about 1.5 years ago", "start": 397.66, "duration": 6.709}, {"text": "but since I used other components", "start": 405.13, "duration": 2.54}, {"text": "I will still explain my circuits before eventually coming back to his work in", "start": 407.67, "duration": 4.949}, {"text": "Order to use most of his code to save a bit of time and effort", "start": 412.9, "duration": 2.839}, {"text": "Anyway for the power supply we need a center tapped transformer like this one", "start": 417.55, "duration": 4.76}, {"text": "After connecting it to mains voltage, which you should not do if you never worked with electronics before, since that can be lethal", "start": 422.89, "duration": 7.819}, {"text": "We can see here that between its outer pins", "start": 431.44, "duration": 2.57}, {"text": "We got an AC voltage of 30 volts RMS and between the outer pins and the middle pin", "start": 434.01, "duration": 6.029}, {"text": "around 15 volts RMS", "start": 440.32, "duration": 2.0}, {"text": "This is mandatory to create a plus and minus 12 volt rail at the end of this power electronic circuit", "start": 443.2, "duration": 6.259}, {"text": "whose only job is to power the op amp which allows us to move the waveform around between the two voltage rails", "start": 450.34, "duration": 7.76}, {"text": "Of course, we also got a 5 volt regulator to power the Arduino, rotary encoder AD8933 IC and LCD", "start": 458.94, "duration": 10.5}, {"text": "Needless to say the Arduino manages everything like displaying the current frequency and waveform on the LCD", "start": 469.5, "duration": 6.64}, {"text": "Adjusting the values according to the rotation and button presses of the rotary encoder", "start": 477.13, "duration": 4.549}, {"text": "and of course sending the current frequency and waveform information over to the DDS IC and", "start": 481.78, "duration": 7.339}, {"text": "Finally like already mentioned", "start": 489.97, "duration": 1.85}, {"text": "We also got an inverting op-amp circuit with an adjustable gain through a potentiometer of around 22", "start": 491.82, "duration": 6.779}, {"text": "Which should be enough to boost the DDS IC maximum output voltage of", "start": 499.03, "duration": 5.059}, {"text": "0.65 volts up to 12 volts", "start": 504.82, "duration": 2.509}, {"text": "by the way", "start": 508.27, "duration": 0.8}, {"text": "The second potentiometer connected to the non-inverting inputs is used to generate the offset further amplified waveform", "start": 509.07, "duration": 7.559}, {"text": "So with the theory out of the way,", "start": 517.51, "duration": 2.089}, {"text": "I started soldering all of my components onto a piece of perf board and", "start": 519.63, "duration": 4.5}, {"text": "Afterwards to one another according to my final schematic", "start": 524.589, "duration": 3.47}, {"text": "As soon as my circuit was complete after around 4 hours", "start": 528.58, "duration": 4.339}, {"text": "I added wires to the external components as well as headers and", "start": 533.52, "duration": 4.139}, {"text": "Ultimately hooked them all up to the circuits", "start": 538.24, "duration": 2.45}, {"text": "After then connecting the 3 transformer terminals to the circuit", "start": 541.839, "duration": 3.95}, {"text": "It was time for the first powerup, which did not result in an explosion", "start": 545.92, "duration": 4.549}, {"text": "Perfect", "start": 551.32, "duration": 1.65}, {"text": "Instead. I measured all the required voltage rails and thus continued with the programming", "start": 552.97, "duration": 5.72}, {"text": "Now at this point I highly recommend checking out Caesar Chirilla's article to find out how the code works", "start": 559.45, "duration": 6.2}, {"text": "Since I based my code around his and just changed a few minor things", "start": 566.35, "duration": 4.16}, {"text": "So after I uploaded the code I used my oscilloscope to check whether everything worked correctly", "start": 571.75, "duration": 5.539}, {"text": "Which it surely did", "start": 578.2, "duration": 2.0}, {"text": "but since such naked function generator is not comfortable and safe to work with", "start": 580.33, "duration": 5.269}, {"text": "I started measuring the dimensions of all the components and designed a housing for its in 123D design", "start": 586.089, "duration": 6.47}, {"text": "After then 3d printing its which took around 15 hours. I mounted the external components in place", "start": 593.41, "duration": 7.369}, {"text": "and glued the transformer and perfboard into the box", "start": 601.54, "duration": 2.96}, {"text": "Which means my DIY function generator was complete", "start": 605.2, "duration": 3.379}, {"text": "Now after testing it for a bit, I have to say that it comes with most of the features that I was looking for", "start": 609.579, "duration": 6.5}, {"text": "but especially in the higher frequency range, it does not work as well as I would have like", "start": 616.72, "duration": 6.44}, {"text": "Of course, it does also not offer a crazy advanced features like my expensive function generator", "start": 624.1, "duration": 5.239}, {"text": "But I have to say that for price of merely 50 euro", "start": 629.92, "duration": 3.65}, {"text": "It offers a pretty decent price performance balance, which is why for me DIY is this time the winner", "start": 633.97, "duration": 6.959}, {"text": "As always thanks for watching", "start": 641.539, "duration": 2.0}, {"text": "let me know your opinion about this project in the comment section below and", "start": 644.08, "duration": 4.74}, {"text": "as always don't forget to Like share subscribe and", "start": 648.82, "duration": 3.22}, {"text": "Hitting the notification bell", "start": 652.14, "duration": 1.96}, {"text": "Stay creative and I will see you next time!", "start": 655.069, "duration": 3.589}]