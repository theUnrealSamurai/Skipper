[{"text": "Warning! these circuits showcased in this video use mains voltage", "start": 0.939, "duration": 4.009}, {"text": "mishandling of such a high voltage can lead to fatal injuries", "start": 5.83, "duration": 3.229}, {"text": "Replicate the circuits at your own risk.", "start": 10.059, "duration": 2.0}, {"text": "In a previous video we found out how traditional light dimming functions by examining a commercial dimmer", "start": 13.83, "duration": 7.469}, {"text": "And afterwards I showed you how to create an improved DIY", "start": 22.15, "duration": 3.44}, {"text": "Microcontroller dimmer that as you can see here still functions without a problem", "start": 25.93, "duration": 4.34}, {"text": "Well, at least with old halogen light bulbs", "start": 31.029, "duration": 2.93}, {"text": "Because when it comes to dimming AC LED light bulbs everything becomes much more complicated and complex", "start": 34.75, "duration": 6.739}, {"text": "Due to the structure of them", "start": 42.1, "duration": 2.0}, {"text": "So to get rid of this confusion, we will experimentally determine the electrical challenges AC LED light bulbs come with", "start": 44.71, "duration": 7.94}, {"text": "Examine a commercial trailing edge dimmer, and finally create our own DIY trailing edge dimmer with and without a microcontroller", "start": 53.65, "duration": 7.939}, {"text": "Let's get started", "start": 62.769, "duration": 2.0}, {"text": "This video is sponsored by JLCPCB", "start": 76.39, "duration": 3.11}, {"text": "Whose goal is to give engineers the best experience when it comes to ordering PCBs", "start": 79.99, "duration": 5.42}, {"text": "Try out their $2 PCB prototypes today and easily track every production step of your PCBs online", "start": 86.38, "duration": 7.22}, {"text": "First off let's have a look at all the LED light bulbs which are labeled as not dimmable", "start": 95.62, "duration": 5.899}, {"text": "After connecting one of them to my DIY dimmer and hooking up differential voltage probes as well as a current clamp", "start": 102.52, "duration": 6.8}, {"text": "We can see that by varying the phase angle, the brightness of the light bulb pretty much stays constant", "start": 109.96, "duration": 6.529}, {"text": "Unless the phase angle is very big at which point the bulb begins to flicker", "start": 117.25, "duration": 5.36}, {"text": "The reason for that is the power supply of the LEDs, which after tearing it apart", "start": 123.759, "duration": 5.389}, {"text": "Turned out to be build around a 9918C LED driver IC.", "start": 129.61, "duration": 5.059}, {"text": "This is a type of switch mode power supply which comes with a rather big capacitor on the inputs as a power reservoir", "start": 135.73, "duration": 7.699}, {"text": "Now as soon as the mains voltage is somehow available, the capacitor on the input gets charged up quickly", "start": 144.4, "duration": 7.22}, {"text": "And the stored energy from it is enough to illuminate the LEDs for the rest of the half cycle of the mains voltage", "start": 152.17, "duration": 6.38}, {"text": "That is why for the most part of the phase angle control, the brightness stays the same", "start": 159.489, "duration": 5.029}, {"text": "since even a small mains voltage section can deliver enough energy", "start": 165.1, "duration": 4.069}, {"text": "only with a very big phase angle the delivered energy is not enough and", "start": 170.019, "duration": 4.67}, {"text": "Thus the LEDs turn off during the next half wave which results in this flickering behavior.", "start": 174.97, "duration": 6.32}, {"text": "I also tried the same test with the other non dimmable LED light bulbs", "start": 182.23, "duration": 4.639}, {"text": "Which sometimes offered a bit more brightness control since in the end, we do control the delivered energy amounts", "start": 187.209, "duration": 7.16}, {"text": "but most of the time they behaved like the first light bulb", "start": 194.65, "duration": 3.559}, {"text": "What I realized though while testing those bulbs was the first big problem of such TRIAC dimmers.", "start": 199.269, "duration": 6.02}, {"text": "with traditional halogen light bulbs,", "start": 206.2, "duration": 2.18}, {"text": "We got a constant current flow across the available mains voltage which since it is bigger than the holding current of the TRIAC,", "start": 208.62, "duration": 7.41}, {"text": "Keeps it open", "start": 216.489, "duration": 1.771}, {"text": "But with the LED bulbs the current quickly decreases to almost zero after the impulse", "start": 218.26, "duration": 5.63}, {"text": "Which means since the TRIAC is no longer activated through its gates,", "start": 224.53, "duration": 4.07}, {"text": "and we undershot the holding current the TRIAC is closed,", "start": 228.6, "duration": 4.649}, {"text": "and another charge up of the LED power supply would not be possible", "start": 233.68, "duration": 3.289}, {"text": "The second problem i noticed occurred while testing my almost six year old LG light bulb", "start": 237.97, "duration": 5.779}, {"text": "Whose current waveform looked pretty extraordinary and quickly led to the destruction of my TRIAC", "start": 244.3, "duration": 6.38}, {"text": "The problem was probably the electromagnetic interference filter of the bulb", "start": 251.8, "duration": 4.939}, {"text": "Whose job is to reduce noise generated by the switch mode power supply", "start": 257.2, "duration": 4.639}, {"text": "Due to the big voltage change in a short time, We got a huge current spike due to the capacitors", "start": 262.93, "duration": 5.72}, {"text": "And since there are inductors available, we got ourselves an oscillator, which can lead to big problems", "start": 269.17, "duration": 6.229}, {"text": "So getting rid of the sharp voltage edge would be a good idea since it would also reduce the operating noises", "start": 276.79, "duration": 6.709}, {"text": "generated by, for example the dimmable LED light bulb I got from Amazon", "start": 283.84, "duration": 4.85}, {"text": "Those dimmable like bulbs, by the way", "start": 289.9, "duration": 2.21}, {"text": "All dimmed perfectly fine with my DIY dimmer since their current waveform pretty much all looked like this", "start": 292.51, "duration": 6.559}, {"text": "This time we got a steady current flow whose length and thus delivered energy to the light bulb", "start": 300.07, "duration": 5.959}, {"text": "Can be shorted with a bigger phase angle which results in a dimmable brightness", "start": 306.19, "duration": 5.059}, {"text": "This is accomplished by not relying on simple and cheap power supplies", "start": 312.37, "duration": 4.429}, {"text": "But instead using a more sophisticated and expensive LED driver IC", "start": 317.38, "duration": 4.579}, {"text": "Like the LM3445 TRIAC dimmable LED driver, for example.", "start": 322.63, "duration": 4.279}, {"text": "whose datasheet can tell you lots of secrets about such dimmable LED driver circuits", "start": 326.91, "duration": 6.779}, {"text": "So when you buy properly labeled dimmable LED light bulbs", "start": 334.78, "duration": 3.86}, {"text": "They should function well with leading-edge dimmers we use so far which like the name implies offers a leading edge voltage", "start": 338.8, "duration": 7.7}, {"text": "But like we already determined, such a leading edge creates current spikes", "start": 347.59, "duration": 4.399}, {"text": "Electromagnetic interference and noise and since such designs are also often based around a TRIAC", "start": 353.05, "duration": 6.35}, {"text": "We also got the minimum holding current issue", "start": 359.71, "duration": 2.779}, {"text": "To get rid of all those problems we can get ourselves and modern trailing edge demo from eBay for around 50 euro", "start": 363.64, "duration": 7.639}, {"text": "After receiving it", "start": 372.43, "duration": 1.16}, {"text": "I hooked it up to mains voltage and connected the differential voltage probes as well as the current clamp and", "start": 373.59, "duration": 7.02}, {"text": "As you can see on the oscilloscope", "start": 381.28, "duration": 2.0}, {"text": "This time we got our edge at the end and thus the amazon dimmable bulb", "start": 383.44, "duration": 5.54}, {"text": "We got noise problems with earlier is now completely silent", "start": 389.22, "duration": 3.75}, {"text": "But keep in mind that such trailing edge dimmers do not make not dimmable LED light bulbs suddenly dimmable", "start": 393.82, "duration": 6.47}, {"text": "But they are definitely more likely to offer better dimming results", "start": 400.99, "duration": 4.13}, {"text": "The only question remaining is how such a voltage waveform can be achieved electrically", "start": 406.06, "duration": 5.24}, {"text": "Since a TRIAC with it's given holding current can no longer be used", "start": 411.82, "duration": 4.13}, {"text": "To find that out,", "start": 416.98, "duration": 1.1}, {"text": "I opened up the commercial trailing edge dimmer and found a pretty complex circuits build around a microcontroller", "start": 418.08, "duration": 6.959}, {"text": "The two main power switches are this time those FCPF11N60 MOSFETs", "start": 426.25, "duration": 5.929}, {"text": "Which are connected in series to the power line and load like it's shown here", "start": 432.61, "duration": 4.97}, {"text": "When a voltage is applied to the gates the current can flow through them and as soon as there's no control voltage applied", "start": 438.55, "duration": 7.28}, {"text": "The current flow is interrupted", "start": 446.14, "duration": 2.0}, {"text": "Which makes trailing edge control possible.", "start": 448.63, "duration": 2.45}, {"text": "Now in order to convert my DIY dimmer into a trailing edge one", "start": 452.05, "duration": 4.1}, {"text": "I firstly searched for suitable high voltage MOSFETs and found this IRF840", "start": 456.15, "duration": 7.55}, {"text": "Only problem was that five volts as the gate voltage is not the optimal solution", "start": 464.08, "duration": 5.239}, {"text": "So I replaced the 5 volt power supply of my design with a 12 volt one", "start": 470.08, "duration": 5.119}, {"text": "Added a 5 volt linear regulator for the control electronics and a 4N35 optocoupler", "start": 475.78, "duration": 7.76}, {"text": "to activate/deactivate the power MOSFETs", "start": 484.24, "duration": 2.0}, {"text": "according to this final schematic of the microcontroller trailing edge dimmer", "start": 487.27, "duration": 3.829}, {"text": "I then designed a proper PCB for it", "start": 491.1, "duration": 2.699}, {"text": "And as soon as that was done,", "start": 494.05, "duration": 1.79}, {"text": "I exported the Gerber files and ordered five pieces of my PCBs from", "start": 495.84, "duration": 5.22}, {"text": "JLCPCB for only two dollars plus shipping", "start": 501.52, "duration": 3.68}, {"text": "after week of waiting my PCBs arrived and looked like always, very attractive", "start": 506.2, "duration": 5.779}, {"text": "So much so that I could not resist soldering all of the required components immediately to the board", "start": 512.83, "duration": 6.38}, {"text": "Which took me around half an hour, as soon as that was done", "start": 519.37, "duration": 4.609}, {"text": "I hooked up my Arduino Uno as the programmer to the ISP header and", "start": 523.979, "duration": 4.53}, {"text": "adjusted the code for the dimmer by simply activating the MOSFETs at every zero crossing point", "start": 529.09, "duration": 6.679}, {"text": "and then turning them off after a set time by the timer", "start": 535.96, "duration": 3.5}, {"text": "with those changes implemented", "start": 540.55, "duration": 1.62}, {"text": "I uploaded the code to the ATTiny and then hooked the circuits up to mains voltage and the light bulb", "start": 542.17, "duration": 7.01}, {"text": "After powering the circuits the dimming of the halogen light bulb was no problem as well as he dimmable light bulbs", "start": 550.45, "duration": 7.549}, {"text": "including the light bulb", "start": 559.06, "duration": 1.37}, {"text": "I originally got from my friend which started this whole LED dimming adventure", "start": 560.43, "duration": 5.28}, {"text": "On the oscilloscope, we can also see that the trailing edge dimming works flawlessly", "start": 566.2, "duration": 5.029}, {"text": "Now at this point I could end this video and you should have already learned quite a lot about the subjects", "start": 572.53, "duration": 6.109}, {"text": "but as a bonus, I searched for a simpler trailing edge dimming circuits and found this", "start": 579.28, "duration": 4.72}, {"text": "FL5150 MOSFET AC Phase Cut Dimmer controller IC, whose functional principle you can find in its data sheet", "start": 584.0, "duration": 9.94}, {"text": "according to its given example circuits", "start": 594.82, "duration": 2.69}, {"text": "I created my own schematic in easyEDA and turned it into a proper PCB design", "start": 597.51, "duration": 6.209}, {"text": "Which I then obviously ordered through JLCPCB", "start": 603.94, "duration": 3.739}, {"text": "Just like before, the PCBs looked promising", "start": 608.83, "duration": 2.839}, {"text": "So I soldered all of the components onto its and afterwards tested these circuits", "start": 612.49, "duration": 5.419}, {"text": "which also worked like a charm", "start": 618.339, "duration": 2.27}, {"text": "and the cool feature of this IC is that it does not only offer a trailing edge dimming control", "start": 621.28, "duration": 5.329}, {"text": "But also a leading edge dimming control by simply flipping a switch on the PCB", "start": 627.16, "duration": 5.829}, {"text": "so feel free to rebuild any of those circuits, but make sure to handle mains voltage with care", "start": 633.87, "duration": 6.47}, {"text": "As always thanks for watching. Don't forget to Like, share, subscribe and hitting the notification bell", "start": 641.34, "duration": 7.13}, {"text": "Stay creative and I will see you next time", "start": 649.5, "duration": 3.559}]